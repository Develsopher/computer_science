# 데이터베이스 인덱스(INDEX) ✨

데이터베이스를 다루는 데 있어서 **인덱스(Index)** 는 매우 중요한 구성 요소입니다. 인덱스는 데이터 검색 속도를 빠르게 하여, 성능을 크게 향상시킬 수 있는 기능입니다. 오늘은 인덱스의 기본 개념부터, 면접에서 예상되는 질문까지 알아보려고 합니다.

---

## 인덱스(INDEX)란? 📚

데이터베이스 인덱스는 테이블의 데이터를 빠르게 조회할 수 있도록 도와주는 데이터베이스 관리 시스템(DBMS)의 기능입니다. 책의 찾아보기와 유사하게, 데이터베이스 인덱스를 사용하면 특정 조건에 맞는 데이터를 더 빠르게 찾을 수 있습니다.

---

## 인덱스의 작동 원리 🛠

인덱스는 주로 B-트리(B-Tree) 또는 해시 테이블(Hash Table) 구조를 사용하여 데이터를 저장합니다.

---

### `B-트리 인덱스`
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FRTdY8%2Fbtrwoo36Hg2%2FxFjxvi5SS9LAIlFACYuh9K%2Fimg.jpg">

###### 출처 : http://www.btechsmartclass.com/data_structures/b-trees.html

이진 검색 트리의 일종으로, `자식 노드가 2개 이상인 트리 구조`입니다. B-트리는 데이터를 정렬된 상태로 유지하여 범위 검색과 정렬된 데이터의 효율적인 접근을 가능하게 합니다. 대부분의 관계형 데이터베이스 시스템에서 사용됩니다.

B-트리에 대해서는 설명할 것이 많기 때문에 다음차시에 B+트리와 함께 다루도록 하겠습니다.

---

### `해시 테이블 인덱스`

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fy0OIg%2Fbtrwn4Ybex8%2F1JeiDurjQlIcvDC36zRM30%2Fimg.webp">

##### 출처 : https://applepick.tistory.com/155

해시 함수를 사용하여 데이터의 저장 위치를 빠르게 찾을 수 있습니다. 주로 `등가 검색(equality search)에 유용`하지만, 범위 검색에는 적합하지 않습니다.

해시함수는 값이 조금이라도 달라지면 완전히 다른 해시 값을 생성하기 때문에 `부등호 연산이 자주 사용되는 데이터 베이스 검색을 위해서는 적합하지 않습니다.`

앞서 스터디에서 다뤘던 적이 있었는데, O(1)의 시간복잡도 일수도, 바로 찾지 못하고 모든 위치를 돌면 O(n)의 복잡도일 수 있는 단점이 있습니다.


---


## 인덱스의 장단점 ⚖️

### 장점

1. **검색 속도 향상**: 인덱스를 이용하면 데이터 검색 속도를 현저히 빠르게 할 수 있습니다.
2. **정렬된 데이터**: 인덱스를 사용하면 데이터가 정렬되어 있어, 범위 검색과 정렬이 빠릅니다.

### 단점

1. **공간 사용**: 인덱스를 생성하면 추가적인 저장공간이 필요합니다.
2. **유지 보수 비용**: 데이터가 추가, 삭제, 수정될 때마다 인덱스도 갱신되어야 하므로 성능에 영향을 줄 수 있습니다.

---


## 면접 예상 질문지 🎤

1. **인덱스는 어떤 상황에서 사용하면 좋을까요?**
   - 주로 검색 연산이 자주 발생하는 컬럼에 사용하며, 데이터의 양이 많고, 검색과 정렬을 자주 수행해야 할 때 효과적입니다.

2. **클러스터드 인덱스와 넌 클러스터드 인덱스의 차이점은 무엇인가요?**
   - 클러스터드 인덱스는 데이터를 실제로 저장하는 순서를 변경하여 디스크 I/O를 줄이는 반면, 넌 클러스터드 인덱스는 별도의 공간에 인덱스 정보를 저장하고 실제 데이터는 원래 순서대로 남아있습니다.
   - 클러스터드 인덱스는 실제 데이터의 물리적인 순서를 변경하기 때문에, 데이터 삽입이나 삭제가 발생했을 때 더 큰 오버헤드가 발생할 수 있습니다. 반면에 넌 클러스터드 인덱스는 이러한 작업에 덜 민감합니다.
   - 범위검색이 이루어지는 컬럼 - 클러스터드 인덱스
   - 특정값에 대한 직접 조회가 많은 경우 - 넌 클러스터드 인덱스


---

## 마무리 💫

모든 상황에서 인덱스가 유용한 것은 아닙니다. 예를 들어, 매우 작은 데이터베이스에서는 인덱스의 이점이 거의 없으며, 쓰기 연산이 매우 빈번한 테이블에서는 인덱스가 오히려 성능을 저하시킬 수도 있습니다. 

인덱스는 추가적인 디스크 공간을 사용하고, 데이터 변경 시에는 인덱스도 함께 갱신되어야 하기 때문에 오버헤드가 발생할 수 있습니다.

따라서 인덱스의 사용은 특정한 데이터베이스의 데이터 양, 사용 패턴, 성능 요구사항에 따라 신중하게 결정해야 합니다.
